<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Välj Spel</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <h1>Välj X01-variant</h1>
        <div class="button-grid">
            <button class="main-btn" id="game301" onclick="selectGame(301, this)">301</button>
            <button class="main-btn" id="game501" onclick="selectGame(501, this)">501</button>
            <button class="main-btn" id="game701" onclick="selectGame(701, this)">701</button>
            <button class="main-btn" id="game1001" onclick="selectGame(1001, this)">1001</button>
        </div>

        <h2>Välj Svårighetsgrad</h2>
        <div class="button-grid">
            <button class="main-btn" id="straight-in" onclick="selectDifficulty('straight-in', this)">Straight-In</button>
            <button class="main-btn" id="double-in" onclick="selectDifficulty('double-in', this)">Double-In</button>
            <button class="main-btn" id="master-in" onclick="selectDifficulty('master-in', this)">Master-In</button>
        </div>

        <h2>Välj Avslutningsregel</h2>
        <div class="button-grid">
            <button class="main-btn" id="straight-out" onclick="selectEndRule('straight-out', this)">Straight-Out</button>
            <button class="main-btn" id="double-out" onclick="selectEndRule('double-out', this)">Double-Out</button>
            <button class="main-btn" id="master-out" onclick="selectEndRule('master-out', this)">Master-Out</button>
        </div>

        <button class="next-btn" onclick="startGame()">Starta Spelet</button>
    </div>

    <script>
        let selectedGame = null;
        let selectedDifficulty = "straight-in";
        let selectedEndRule = "double-out";

        function selectGame(game, element) {
            selectedGame = game;
            localStorage.setItem("gameScore", game);
            highlightSelection(element, "game");
        }

        function selectDifficulty(difficulty, element) {
            selectedDifficulty = difficulty;
            localStorage.setItem("gameDifficulty", difficulty);
            highlightSelection(element, "difficulty");
        }

        function selectEndRule(rule, element) {
            selectedEndRule = rule;
            localStorage.setItem("gameEndRule", rule);
            highlightSelection(element, "endRule");
        }

        function highlightSelection(selectedElement, type) {
            let buttons = document.querySelectorAll(`.button-grid .main-btn[id^=${type}]`);
            buttons.forEach(btn => btn.classList.remove("selected"));
            selectedElement.classList.add("selected");
        }

        function startGame() {
            if (!selectedGame) {
                alert("Välj en X01-variant innan du startar spelet.");
                return;
            }
            localStorage.setItem("players", JSON.stringify([]));
            window.location.href = "players.html";
        }
    </script>
</body>
</html>
